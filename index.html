<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>Utleide malerier – live tracking</title>

  <!-- Leaflet CSS (CDN) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin="anonymous"
  />

  <style>
    /* Fullscreen, ren og filmvennlig look */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: #0b0c0e; /* bakgrunn hvis kart ikke har lastet */
    }
    #map {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
    }

    /* Minimal UI – flytende bar med tittel og fullscreen-knapp */
    .topbar {
      position: fixed;
      top: env(safe-area-inset-top, 12px);
      left: 12px;
      right: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      background: rgba(18, 18, 22, 0.6);
      -webkit-backdrop-filter: blur(6px);
      backdrop-filter: blur(6px);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 14px;
      padding: 10px 12px;
      z-index: 5000;
      color: #eaeaea;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      font-size: 14px;
      line-height: 1.2;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 8px;
      opacity: 0.95;
      font-weight: 600;
      letter-spacing: 0.2px;
    }
    .brand-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #f45;
      box-shadow: 0 0 0 2px rgba(255, 68, 85, 0.3);
    }
    .btn {
      appearance: none;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: #fff;
      border-radius: 10px;
      padding: 8px 10px;
      font: inherit;
      cursor: pointer;
    }
    .btn:active { transform: translateY(1px); }

    /* Leaflet tweaks – bare zoomkontroller, liten attribution */
    .leaflet-control-attribution {
      background: rgba(18,18,22,0.6) !important;
      color: #bdbdbd !important;
      border-radius: 10px !important;
      padding: 2px 6px !important;
      font-size: 10px !important;
      border: 1px solid rgba(255,255,255,0.08) !important;
    }
    .leaflet-control-zoom a {
      background: rgba(18,18,22,0.7);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: none;
    }
    .leaflet-control-zoom a:hover { background: rgba(18,18,22,0.9); }

    /* Minimal markør som pulserer svakt (filmvennlig) */
    .pulse-marker {
      width: 14px;
      height: 14px;
      background: #ff4455;
      border: 2px solid #fff;
      border-radius: 50%;
      box-shadow: 0 0 0 0 rgba(255,68,85,0.7);
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255,68,85,0.6); }
      70% { box-shadow: 0 0 0 16px rgba(255,68,85,0); }
      100% { box-shadow: 0 0 0 0 rgba(255,68,85,0); }
    }

    /* Popup med litt typografi */
    .art-popup {
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: #111;
    }
    .art-popup h3 {
      margin: 0 0 8px 0;
      font-size: 16px;
      line-height: 1.2;
    }
    .art-popup img {
      width: 220px;
      max-width: 70vw;
      height: auto;
      border-radius: 10px;
      display: block;
      border: 1px solid #ddd;
    }

    /* iOS safe-area help */
    @supports (padding: max(0px)) {
      .topbar { padding-top: max(10px, env(safe-area-inset-top)); }
    }
  </style>
</head>
<body>
  <div id="map" role="application" aria-label="Kart over sporingspunkter for malerier"></div>

  <div class="topbar">
    <div class="brand">
      <span class="brand-dot" aria-hidden="true"></span>
      <span>Utleide malerier – Live</span>
    </div>
    <div style="display:flex; gap:8px;">
      <button class="btn" id="btnFit">Zoom til alle</button>
      <button class="btn" id="btnFull">Fullskjerm</button>
    </div>
  </div>

  <!-- Leaflet JS (CDN) -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin="anonymous"
  ></script>

  <script>
    // ====== Basiskart (minimal detaljer) med Carto "dark_nolabels" ======
    // Merk: Krever internett-tilgang til tile-server. Attribution beholdes.
    const map = L.map('map', {
      zoomControl: true,
      scrollWheelZoom: true,
      dragging: true,
      tap: true
    });

    const tiles = L.tileLayer(
      'https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png',
      {
        maxZoom: 19,
        attribution:
          '&copy; <a href="https://www.openstreetmap.org/copyright">OSM</a> ' +
          '& <a href="https://carto.com/attributions">CARTO</a>'
      }
    ).addTo(map);

    const points = [
    {
        artwork: "Vinternatt",
        location: "Hamburger Kunsthalle",
        coords: [53.5552936, 10.0030010953872]  // koordinater for Hamburger Kunsthalle  [oai_citation:0‡coordinatesfinder.com](https://www.coordinatesfinder.com/coordinates/896267-hamburger-kunsthalle?utm_source=chatgpt.com)
    },
    {
        artwork: "Natt i Saint Cloud",
        location: "Guggenheim Bilbao Museum",
        coords: [43.2691, -2.9340]  // estimat for Guggenheim Bilbao
    },
    {
        artwork: "Vampyr",
        location: "Bærum / hjemme",
        coords: [59.9127, 10.6310]  // grovt estimat i Bærum-området, må justeres
    },
    {
        artwork: "Aften på Karl Johan",
        location: "Berlinische Galerie",
        coords: [52.5039, 13.39823]  // koordinater for Berlinische Galerie  [oai_citation:1‡Mapcarta](https://mapcarta.com/W33743630?utm_source=chatgpt.com)
    },
    {
        artwork: "På operasjonsbordet",
        location: "Berlinische Galerie",
        coords: [52.5039, 13.39823]
    },
    {
        artwork: "Dødskamp",
        location: "National Museum in Warsaw",
        coords: [52.23167, 21.02472]  // koordinater for National Museum Warsaw  [oai_citation:2‡Wikipedia](https://en.wikipedia.org/wiki/National_Museum_in_Warsaw?utm_source=chatgpt.com)
    },
    {
        artwork: "Madonna",
        location: "National Museum in Warsaw",
        coords: [52.23167, 21.02472]
    },
    {
        artwork: "Marats død",
        location: "Birmingham Museum & Art Gallery",
        coords: [52.4788, -1.8960]  // estimat for Birmingham Museum & Art Gallery
    },
    {
        artwork: "Kvinnen",
        location: "Manchester Art Gallery",
        coords: [53.4808, -2.2379]  // estimat for Manchester Art Gallery
    },
    {
        artwork: "Døden i sykeværelset",
        location: "Musée Matisse",
        coords: [43.2886, 5.3840]  // estimat for Musée Matisse, Nice (for eksempel) — juster om det er en annen by
    },
    {
        artwork: "Løsrivelse",
        location: "Musée d’Orsay",
        coords: [48.8600, 2.3266]  // koordinater for Musée d’Orsay, Paris
    },
    {
        artwork: "Fortvilelse",
        location: "Trondheim kunstmuseum",
        coords: [63.4270, 10.3951]  // estimat for Trondheim kunstmuseum (Trondheim sentrum)  [oai_citation:3‡Wikipedia](https://en.wikipedia.org/wiki/Trondheim_Art_Museum?utm_source=chatgpt.com)
    },
    {
        artwork: "Morderen",
        location: "Munch-museet",
        coords: [59.9070, 10.7525]  // estimat for Munch-museet i Oslo, Bjørvika  [oai_citation:4‡Wikipedia](https://en.wikipedia.org/wiki/Munch_Museum?utm_source=chatgpt.com)
    },
    {
        artwork: "Angst",
        location: "Henie Onstad Kunstsenter",
        coords: [59.8797, 10.4380]  // estimat for Henie Onstad Kunstsenter, Høvikodden
    },
    {
        artwork: "Selvportrett i helvette",
        location: "Budapest",
        coords: [47.4979, 19.0402]  // sentrum av Budapest som estimering
    },
    {
        artwork: "Døden og barnet",
        location: "Museum voor Schone Kunsten Gent",
        coords: [51.0569, 3.7174]  // koordinater for MSK Gent  [oai_citation:5‡Wikipedia](https://en.wikipedia.org/wiki/Museum_of_Fine_Arts%2C_Ghent?utm_source=chatgpt.com)
    }
    ];

    // DivIcon for ren, pulserende markør
    const dotIcon = L.divIcon({
      className: 'pulse-marker',
      iconSize: [14, 14],
      iconAnchor: [7, 7]
    });

    // Legg til markører og popups
    const markers = points.map(p => {
      const m = L.marker(p.coords, { icon: dotIcon }).addTo(map);
      const popupHtml = `
        <div class="art-popup">
          <h3>${p.artwork}</h3>
          <p>${p.location}<p/>
        </div>`;
      m.bindPopup(popupHtml, { closeButton: true, autoPan: true });
      return m;
    });

    // Fit til alle punkter ved oppstart
    const group = L.featureGroup(markers);
    map.fitBounds(group.getBounds().pad(0.2));

    // UI-knapper
    document.getElementById('btnFit').addEventListener('click', () => {
      map.fitBounds(group.getBounds().pad(0.2));
    });

    // Fullscreen toggle
    const mapEl = document.getElementById('map');
    function toggleFull() {
      if (!document.fullscreenElement) {
        (mapEl.requestFullscreen && mapEl.requestFullscreen()) ||
        (mapEl.webkitRequestFullscreen && mapEl.webkitRequestFullscreen());
      } else {
        (document.exitFullscreen && document.exitFullscreen()) ||
        (document.webkitExitFullscreen && document.webkitExitFullscreen());
      }
    }
    document.getElementById('btnFull').addEventListener('click', toggleFull);

    // Dobbelttrykk for fullskjerm (mobil)
    let lastTap = 0;
    mapEl.addEventListener('touchend', () => {
      const now = Date.now();
      if (now - lastTap < 350) toggleFull();
      lastTap = now;
    }, { passive: true });
  </script>
</body>
</html>